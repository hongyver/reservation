# config.py 사용 가이드

config.py 파일에서 3가지 방법으로 예약을 설정할 수 있습니다.

---

## 📋 3가지 방법 비교

| 방법 | 사용 케이스 | 설정 |
|------|-------------|------|
| **방법 1** | 모든 코트에 같은 시간 적용 | `dates`, `hours`, `court_number` |
| **방법 2** | 각 코트별로 완전히 다른 시간 | `reservations` ✨ |
| **방법 3** | 코트별 시간대 + 여러 날짜 반복 | `dates`, `court_schedules` ✨ |

---

## 방법 1: 기본 방식 (모든 코트에 같은 시간)

**사용 시나리오:** 모든 코트에 동일한 시간대를 예약하고 싶을 때

### config.py 설정
```python
RESERVATION_CONFIG = {
    "dates": [
        "2026-02-09",  # 토
        "2026-02-16",  # 토
    ],
    "hours": [8, 10],
    "court_number": 3,
}
```

### 실행 시 동작
- 2026-02-09: 3번 코트 8시, 10시
- 2026-02-16: 3번 코트 8시, 10시
- **총 4건 예약**

### 여러 코트 예약 (모두 같은 시간)
```python
RESERVATION_CONFIG = {
    "dates": ["2026-02-09"],
    "hours": [8, 10],
    "courts": [1, 2, 3],  # 여러 코트
}
```
→ 1,2,3번 코트 모두 8시, 10시 (총 6건)

---

## 방법 2: 예약 직접 지정 ✨ (가장 유연)

**사용 시나리오:** 코트별로 완전히 다른 날짜/시간을 예약하고 싶을 때

### config.py 설정
```python
RESERVATION_CONFIG = {
    "reservations": [
        {"date": "2026-02-09", "hour": 8, "court": 1},
        {"date": "2026-02-09", "hour": 10, "court": 1},
        {"date": "2026-02-09", "hour": 6, "court": 2},
        {"date": "2026-02-16", "hour": 12, "court": 3},
    ]
}
```

### 실행 시 동작
- 1번 코트: 2026-02-09 8시, 10시
- 2번 코트: 2026-02-09 6시
- 3번 코트: 2026-02-16 12시
- **총 4건 예약**

### 실전 예시: 주말마다 다른 코트
```python
RESERVATION_CONFIG = {
    "reservations": [
        # 토요일 - 1번 코트 아침
        {"date": "2026-02-07", "hour": 8, "court": 1},
        {"date": "2026-02-07", "hour": 10, "court": 1},
        # 일요일 - 2번 코트 이른 아침
        {"date": "2026-02-08", "hour": 6, "court": 2},
        {"date": "2026-02-08", "hour": 8, "court": 2},
    ]
}
```

---

## 방법 3: 코트별 시간대 지정 ✨

**사용 시나리오:** 코트별 선호 시간대가 있고, 같은 패턴을 여러 날짜에 반복할 때

### config.py 설정
```python
RESERVATION_CONFIG = {
    "dates": [
        "2026-02-09",  # 토
        "2026-02-16",  # 토
    ],
    "court_schedules": [
        {"court": 1, "hours": [8, 10]},      # 1번: 아침
        {"court": 2, "hours": [6, 8]},       # 2번: 이른 아침
        {"court": 3, "hours": [10, 12, 14]}, # 3번: 오전~오후
    ]
}
```

### 실행 시 동작
**2026-02-09:**
- 1번 코트: 8시, 10시
- 2번 코트: 6시, 8시
- 3번 코트: 10시, 12시, 14시

**2026-02-16:**
- 1번 코트: 8시, 10시
- 2번 코트: 6시, 8시
- 3번 코트: 10시, 12시, 14시

**총 14건 예약** (7건 × 2일)

### 실전 예시: 매주 같은 패턴
```python
RESERVATION_CONFIG = {
    "dates": [
        "2026-02-07",   # 토
        "2026-02-14",   # 토
        "2026-02-21",   # 토
        "2026-02-28",   # 토
    ],
    "court_schedules": [
        {"court": 1, "hours": [6, 8]},    # 1번: 이른 아침
        {"court": 2, "hours": [10, 12]},  # 2번: 오전
        {"court": 3, "hours": [18, 20]},  # 3번: 저녁
    ]
}
```
→ 매주 토요일마다 같은 패턴으로 예약 (총 24건)

---

## 실행 방법

### HTTP 모드 (권장)
```bash
# 테스트
python3 main.py --test

# 실제 예약
python3 main.py
```

### 브라우저 모드
```bash
# 테스트
python3 main.py --browser --test

# 실제 예약
python3 main.py --browser
```

---

## ⚠️ 주의사항

### 방법 선택 시
- **방법 1, 2, 3 중 하나만 사용**하세요!
- 여러 방법을 동시에 사용하면 안 됩니다.

### 방법 변경 시
1. 기존 `RESERVATION_CONFIG` 전체를 주석 처리
2. 원하는 방법의 주석을 해제
3. 설정 변경 후 `python3 main.py`로 확인

### 예시: 방법 1에서 방법 2로 변경

**변경 전:**
```python
RESERVATION_CONFIG = {
    "dates": ["2026-02-09"],
    "hours": [8],
    "court_number": 3,
}
```

**변경 후:**
```python
# 방법 1 주석 처리
# RESERVATION_CONFIG = {
#     "dates": ["2026-02-09"],
#     "hours": [8],
#     "court_number": 3,
# }

# 방법 2 사용
RESERVATION_CONFIG = {
    "reservations": [
        {"date": "2026-02-09", "hour": 8, "court": 1},
        {"date": "2026-02-09", "hour": 10, "court": 2},
    ]
}
```

---

## 시간 값 설명

| 값 | 예약 시간 |
|----|----------|
| 6  | 06:00~08:00 |
| 8  | 08:00~10:00 |
| 10 | 10:00~12:00 |
| 12 | 12:00~14:00 |
| 14 | 14:00~16:00 |
| 16 | 16:00~18:00 |
| 18 | 18:00~20:00 |
| 20 | 20:00~22:00 |

⚠️ **2시간 단위로만 예약 가능**

---

## 코트 번호

- 1 = 1번 코트
- 2 = 2번 코트
- 3 = 3번 코트
- 4 = 4번 코트

---

## 예약 오픈 시간 설정

### 즉시 실행 (테스트용)
```python
RESERVATION_DAY = 0
```
→ 프로그램 실행 시 바로 예약 시도

### 매월 특정일에 예약 (실제 사용)
```python
RESERVATION_DAY = 25      # 매월 25일
RESERVATION_HOUR = 10     # 10시
RESERVATION_MINUTE = 30   # 30분
```
→ 매월 25일 10시 30분에만 예약 실행

**동작 방식:**
- 오늘이 25일이고 10:30 이전: 10:30까지 대기 후 예약
- 오늘이 25일이고 10:30 이후: 즉시 예약
- 오늘이 25일보다 작음: "아직 예약일이 아닙니다" 에러
- 오늘이 25일보다 큼: "이미 지났습니다" 에러

---

## 동시 접속 제한

```python
# 최대 3개씩 동시 예약
MAX_CONCURRENT = 3
```

예약이 12건이면 3개씩 4번에 걸쳐 실행됩니다.

---

## 권장 사용법

### 상황별 방법 선택

| 상황 | 권장 방법 |
|------|----------|
| 같은 코트, 같은 시간 반복 | 방법 1 |
| 주말마다 다른 코트 | 방법 2 |
| 코트별 선호 시간대 + 매주 반복 | 방법 3 |
| 복잡한 조합 | 방법 2 |

### 테스트 순서

1. config.py 수정
2. `python3 main.py --test` 실행
3. 예약 내용 확인
4. 문제없으면 `python3 main.py` 실제 실행

---

## 📚 관련 문서

- [API 예약 가이드](API_RESERVE_GUIDE_v2.md)
- [Docker 사용 가이드](README_DOCKER.md)
